// Loads secret keys and passwords from a local file called 'secrets.properties' in the root
// directory of the project (if it exists).
//
// Properties that have already been set (e.g. on command line) take precedence:
// ./gradlew build -PsecretKey=secretValue

final File secrets = rootProject.file('secrets.properties')
if (secrets.exists()) {
    Properties props = new Properties()
    file(secrets).withInputStream { props.load(it) }
    props.each { prop ->
        if (!project.ext.has(prop.key)) {
            project.ext.set(prop.key, prop.value)
        }
    }
}
